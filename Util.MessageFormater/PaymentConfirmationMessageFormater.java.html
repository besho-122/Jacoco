<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PaymentConfirmationMessageFormater.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Library-Management-System</a> &gt; <a href="index.source.html" class="el_package">Util.MessageFormater</a> &gt; <span class="el_source">PaymentConfirmationMessageFormater.java</span></div><h1>PaymentConfirmationMessageFormater.java</h1><pre class="source lang-java linenums">package Util.MessageFormater;

import Service.Payment.PaymentConfirmationData;
import org.springframework.stereotype.Component;

/**
 * Formats payment confirmation data into an HTML email body.
 */
@Component
<span class="fc" id="L10">public class PaymentConfirmationMessageFormater implements IMessageFormater&lt;PaymentConfirmationData&gt;</span>
{

    /**
     * Builds an HTML payment confirmation message using the given data.
     *
     * @param data
     *            the payment confirmation details
     * @return HTML string for the confirmation email, or empty string if data is
     *         null
     */
    @Override
    public String formatMessage(PaymentConfirmationData data)
    {
<span class="fc bfc" id="L24" title="All 2 branches covered.">        if (data == null)</span>
        {
<span class="fc" id="L26">            return &quot;&quot;;</span>
        }

<span class="fc" id="L29">        String htmlTemplate = &quot;&quot;&quot;</span>
                &lt;!DOCTYPE html&gt;
                &lt;html lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
                &lt;head&gt;
                    &lt;meta charset=&quot;UTF-8&quot;&gt;
                    &lt;title&gt;Library Management System · Payment Confirmation&lt;/title&gt;
                    &lt;style&gt;
                        :root {
                            --bg: #020617;
                            --accent: #22c55e;
                            --accent-soft: rgba(34, 197, 94, 0.18);
                            --text-main: #e5e7eb;
                            --text-muted: #9ca3af;
                            --border-subtle: rgba(148, 163, 184, 0.35);
                            --radius-xl: 18px;
                        }

                        * {
                            box-sizing: border-box;
                        }

                        body {
                            margin: 0;
                            padding: 32px 12px;
                            font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;SF Pro Text&quot;,
                            &quot;Segoe UI&quot;, sans-serif;
                            background:
                                    radial-gradient(circle at top, #0b1120 0, #020617 52%),
                                    radial-gradient(circle at bottom, rgba(15, 23, 42, 0.9) 0, transparent 60%);
                            color: var(--text-main);
                        }

                        .wrapper {
                            width: 100%;
                            max-width: 640px;
                            margin: 0 auto;
                        }

                        .card {
                            background: radial-gradient(circle at top left, rgba(34, 197, 94, 0.18), transparent 55%),
                                        radial-gradient(circle at bottom right, rgba(15, 23, 42, 0.9), #020617);
                            border-radius: 28px;
                            border: 1px solid var(--border-subtle);
                            box-shadow:
                                    0 32px 90px rgba(15, 23, 42, 0.85),
                                    0 0 0 1px rgba(148, 163, 184, 0.16);
                            padding: 26px 22px 24px;
                            position: relative;
                            overflow: hidden;
                        }

                        .card-inner {
                            position: relative;
                            z-index: 1;
                        }

                        .badge {
                            display: inline-flex;
                            align-items: center;
                            gap: 8px;
                            padding: 4px 12px 4px 4px;
                            border-radius: 999px;
                            background: rgba(6, 78, 59, 0.9);
                            border: 1px solid rgba(52, 211, 153, 0.7);
                            box-shadow: 0 16px 40px rgba(6, 95, 70, 0.9);
                            margin-bottom: 16px;
                        }

                        .badge-logo {
                            height: 26px;
                            width: 26px;
                            border-radius: 999px;
                            display: inline-flex;
                            align-items: center;
                            justify-content: center;
                            background:
                                    radial-gradient(circle at 20% 20%, #bbf7d0, transparent 55%),
                                    radial-gradient(circle at 80% 80%, #22c55e, transparent 55%);
                            box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9);
                            color: #022c22;
                            font-size: 14px;
                            font-weight: 800;
                            letter-spacing: 0.03em;
                        }

                        .badge-text {
                            font-size: 11px;
                            text-transform: uppercase;
                            letter-spacing: 0.18em;
                            color: #bbf7d0;
                        }

                        .header {
                            display: flex;
                            align-items: flex-start;
                            justify-content: space-between;
                            gap: 12px;
                            margin-bottom: 16px;
                        }

                        .title-block {
                            display: flex;
                            flex-direction: column;
                            gap: 4px;
                        }

                        .title {
                            font-size: 22px;
                            font-weight: 700;
                            letter-spacing: 0.03em;
                            text-transform: uppercase;
                        }

                        .subtitle {
                            font-size: 13px;
                            color: var(--text-muted);
                        }

                        .status-pill {
                            padding: 6px 12px;
                            border-radius: 999px;
                            font-size: 11px;
                            text-transform: uppercase;
                            letter-spacing: 0.16em;
                            border: 1px solid rgba(34, 197, 94, 0.7);
                            background: linear-gradient(
                                    135deg,
                                    rgba(22, 163, 74, 0.22),
                                    rgba(6, 78, 59, 0.9)
                            );
                            color: #bbf7d0;
                            display: inline-flex;
                            align-items: center;
                            gap: 6px;
                            box-shadow: 0 20px 40px rgba(6, 95, 70, 0.8);
                        }

                        .status-dot {
                            width: 7px;
                            height: 7px;
                            border-radius: 999px;
                            background: #bbf7d0;
                            box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.5);
                        }

                        .greeting {
                            margin-bottom: 16px;
                            font-size: 14px;
                            line-height: 1.6;
                            color: var(--text-main);
                        }

                        .greeting strong {
                            color: #e5e7eb;
                        }

                        .summary-grid {
                            display: flex;
                            flex-wrap: wrap;
                            gap: 10px;
                            margin-bottom: 18px;
                        }

                        .summary-card {
                            flex: 1 1 180px;
                            min-width: 0;
                            border-radius: 16px;
                            padding: 10px 12px;
                            border: 1px solid rgba(34, 197, 94, 0.55);
                            background: radial-gradient(circle at top, rgba(15, 23, 42, 0.96), rgba(6, 78, 59, 0.9));
                        }

                        .summary-label {
                            font-size: 11px;
                            text-transform: uppercase;
                            letter-spacing: 0.16em;
                            color: var(--text-muted);
                            margin-bottom: 4px;
                        }

                        .summary-value {
                            font-size: 15px;
                            font-weight: 600;
                            color: #e5e7eb;
                        }

                        .summary-sub {
                            font-size: 12px;
                            margin-top: 2px;
                            color: #86efac;
                        }

                        .details-card {
                            margin-top: 6px;
                            border-radius: 18px;
                            border: 1px solid rgba(148, 163, 184, 0.35);
                            background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), #020617);
                            padding: 14px 16px 12px;
                        }

                        .details-header {
                            font-size: 12px;
                            text-transform: uppercase;
                            letter-spacing: 0.16em;
                            color: var(--text-muted);
                            margin-bottom: 8px;
                        }

                        .details-table {
                            width: 100%;
                            border-collapse: collapse;
                            font-size: 13px;
                        }

                        .details-table tr + tr td {
                            border-top: 1px dashed rgba(55, 65, 81, 0.9);
                        }

                        .details-table td {
                            padding: 6px 0;
                        }

                        .details-label {
                            color: var(--text-muted);
                            width: 40%;
                        }

                        .details-value {
                            color: #e5e7eb;
                            text-align: right;
                            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace;
                        }

                        .note {
                            margin-top: 14px;
                            font-size: 12px;
                            color: var(--text-muted);
                            line-height: 1.5;
                        }

                        .footer {
                            margin-top: 18px;
                            padding-top: 12px;
                            border-top: 1px dashed rgba(55, 65, 81, 0.9);
                            font-size: 11px;
                            color: var(--text-muted);
                        }

                        .footer-strong {
                            color: #e5e7eb;
                        }

                        .brand {
                            margin-top: 6px;
                            font-size: 11px;
                            color: rgba(148, 163, 184, 0.85);
                        }

                        @media (max-width: 600px) {
                            .card {
                                padding: 22px 16px 20px;
                                border-radius: 22px;
                            }

                            .header {
                                flex-direction: column;
                                align-items: flex-start;
                            }

                            .details-value {
                                text-align: left;
                                margin-top: 2px;
                            }
                        }
                    &lt;/style&gt;
                &lt;/head&gt;
                &lt;body&gt;
                &lt;div class=&quot;wrapper&quot;&gt;
                    &lt;div class=&quot;card&quot;&gt;
                        &lt;div class=&quot;card-inner&quot;&gt;
                            &lt;div class=&quot;badge&quot;&gt;
                                &lt;div class=&quot;badge-logo&quot;&gt;LM&lt;/div&gt;
                                &lt;div class=&quot;badge-text&quot;&gt;LIBRARY MANAGEMENT · PAYMENT&lt;/div&gt;
                            &lt;/div&gt;

                            &lt;div class=&quot;header&quot;&gt;
                                &lt;div class=&quot;title-block&quot;&gt;
                                    &lt;div class=&quot;title&quot;&gt;Payment confirmation&lt;/div&gt;
                                    &lt;div class=&quot;subtitle&quot;&gt;
                                        This email confirms your recent payment to the Library Management System.
                                    &lt;/div&gt;
                                &lt;/div&gt;
                                &lt;div class=&quot;status-pill&quot;&gt;
                                    &lt;span class=&quot;status-dot&quot;&gt;&lt;/span&gt;
                                    PAYMENT RECORDED
                                &lt;/div&gt;
                            &lt;/div&gt;

                            &lt;div class=&quot;greeting&quot;&gt;
                                Hello &lt;strong&gt;{{patronName}}&lt;/strong&gt;,&lt;br /&gt;
                                We have successfully received your payment of
                                &lt;strong&gt;{{amountPaid}}&lt;/strong&gt; on &lt;strong&gt;{{paymentDate}}&lt;/strong&gt;.
                                Below you can find a summary of your receipt and updated balance.
                            &lt;/div&gt;

                            &lt;div class=&quot;summary-grid&quot;&gt;
                                &lt;div class=&quot;summary-card&quot;&gt;
                                    &lt;div class=&quot;summary-label&quot;&gt;Amount paid&lt;/div&gt;
                                    &lt;div class=&quot;summary-value&quot;&gt;{{amountPaid}}&lt;/div&gt;
                                    &lt;div class=&quot;summary-sub&quot;&gt;{{currency}}&lt;/div&gt;
                                &lt;/div&gt;
                                &lt;div class=&quot;summary-card&quot;&gt;
                                    &lt;div class=&quot;summary-label&quot;&gt;Receipt ID&lt;/div&gt;
                                    &lt;div class=&quot;summary-value&quot;&gt;{{receiptId}}&lt;/div&gt;
                                    &lt;div class=&quot;summary-sub&quot;&gt;Keep this for your records&lt;/div&gt;
                                &lt;/div&gt;
                                &lt;div class=&quot;summary-card&quot;&gt;
                                    &lt;div class=&quot;summary-label&quot;&gt;Payment date&lt;/div&gt;
                                    &lt;div class=&quot;summary-value&quot;&gt;{{paymentDate}}&lt;/div&gt;
                                    &lt;div class=&quot;summary-sub&quot;&gt;Local library time&lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;

                            &lt;div class=&quot;details-card&quot;&gt;
                                &lt;div class=&quot;details-header&quot;&gt;Payment details&lt;/div&gt;
                                &lt;table class=&quot;details-table&quot; role=&quot;presentation&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;
                                    &lt;tr&gt;
                                        &lt;td class=&quot;details-label&quot;&gt;Payment method&lt;/td&gt;
                                        &lt;td class=&quot;details-value&quot;&gt;{{paymentMethod}}&lt;/td&gt;
                                    &lt;/tr&gt;
                                    &lt;tr&gt;
                                        &lt;td class=&quot;details-label&quot;&gt;Transaction ID&lt;/td&gt;
                                        &lt;td class=&quot;details-value&quot;&gt;{{transactionId}}&lt;/td&gt;
                                    &lt;/tr&gt;
                                    &lt;tr&gt;
                                        &lt;td class=&quot;details-label&quot;&gt;Processed by&lt;/td&gt;
                                        &lt;td class=&quot;details-value&quot;&gt;{{processedBy}}&lt;/td&gt;
                                    &lt;/tr&gt;
                                    &lt;tr&gt;
                                        &lt;td class=&quot;details-label&quot;&gt;Previous balance&lt;/td&gt;
                                        &lt;td class=&quot;details-value&quot;&gt;{{previousBalance}}&lt;/td&gt;
                                    &lt;/tr&gt;
                                    &lt;tr&gt;
                                        &lt;td class=&quot;details-label&quot;&gt;Payment amount&lt;/td&gt;
                                        &lt;td class=&quot;details-value&quot;&gt;{{amountPaid}}&lt;/td&gt;
                                    &lt;/tr&gt;
                                    &lt;tr&gt;
                                        &lt;td class=&quot;details-label&quot;&gt;Remaining balance&lt;/td&gt;
                                        &lt;td class=&quot;details-value&quot;&gt;{{remainingBalance}}&lt;/td&gt;
                                    &lt;/tr&gt;
                                &lt;/table&gt;

                                &lt;div class=&quot;note&quot;&gt;
                                    If you believe any of the above information is incorrect, please contact your library
                                    staff and provide your &lt;strong&gt;Receipt ID&lt;/strong&gt; and &lt;strong&gt;Transaction ID&lt;/strong&gt;.
                                &lt;/div&gt;
                            &lt;/div&gt;

                            &lt;div class=&quot;footer&quot;&gt;
                                &lt;div class=&quot;footer-strong&quot;&gt;
                                    Thank you for keeping your account in good standing.
                                &lt;/div&gt;
                                &lt;div class=&quot;brand&quot;&gt;
                                    Library Management System · Automated Payment Confirmation Email
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;/body&gt;
                &lt;/html&gt;
                &quot;&quot;&quot;;

<span class="fc" id="L402">        return htmlTemplate.replace(&quot;{{patronName}}&quot;,nullSafe(data.patronName()))</span>
<span class="fc" id="L403">                .replace(&quot;{{amountPaid}}&quot;,nullSafe(data.amountPaid()))</span>
<span class="fc" id="L404">                .replace(&quot;{{paymentDate}}&quot;,nullSafe(data.paymentDate()))</span>
<span class="fc" id="L405">                .replace(&quot;{{receiptId}}&quot;,nullSafe(data.receiptId()))</span>
<span class="fc" id="L406">                .replace(&quot;{{paymentMethod}}&quot;,nullSafe(data.paymentMethod()))</span>
<span class="fc" id="L407">                .replace(&quot;{{transactionId}}&quot;,nullSafe(data.transactionId()))</span>
<span class="fc" id="L408">                .replace(&quot;{{processedBy}}&quot;,nullSafe(data.processedBy()))</span>
<span class="fc" id="L409">                .replace(&quot;{{previousBalance}}&quot;,nullSafe(data.previousBalance()))</span>
<span class="fc" id="L410">                .replace(&quot;{{remainingBalance}}&quot;,nullSafe(data.remainingBalance()))</span>
<span class="fc" id="L411">                .replace(&quot;{{currency}}&quot;,nullSafe(data.currency()));</span>
    }

    /**
     * Returns an empty string instead of null for safe template replacement.
     *
     * @param value
     *            value to convert
     * @return string representation or empty string if null
     */
    private static String nullSafe(Object value)
    {
<span class="fc bfc" id="L423" title="All 2 branches covered.">        return value == null ? &quot;&quot; : String.valueOf(value);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>